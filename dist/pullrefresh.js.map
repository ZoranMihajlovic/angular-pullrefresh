{"version":3,"sources":["js/directive.js","js/template.js"],"names":[],"mappings":"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","file":"pullrefresh.js","sourcesContent":["(function() {\n  'use strict';\n\n  class PubSub {\n\n    constructor () {\n      this.handlers = [];\n    }\n\n    subscribe (event, handler, context) {\n\n      if (typeof context === 'undefined') {\n        context = handler;\n      }\n\n      this.handlers.push({\n        event: event,\n        handler: handler.bind(context)\n      });\n\n      return this;\n    }\n\n    publish (event, ...args) {\n      let i = 0;\n\n      for (; i < this.handlers.length; i += 1) {\n\n          if (this.handlers[i].event === event) {\n              this.handlers[i].handler(...args);\n          }\n\n      }\n    }\n  }\n\n\n  class Pan {\n\n  constructor (options = {resistance : 1}) {\n    this._options = options;\n\n    this.reset();\n  }\n\n  get distance () {\n    return this._distance;\n  }\n\n  get isScrolling () {\n    return this._isScrolling;\n  }\n\n  get didMove () {\n    return this._didMove;\n  }\n\n  reset () {\n    this._distance = 0;\n    this._start = 0;\n    this._isScrolling = false;\n    this._didMove = false;\n  }\n\n  begin (val) {\n    this._start = val;\n  }\n\n  calcDistance (pos) {\n    return Math.round((pos - this._start) / this._options.resistance);\n  }\n\n  move (distance) {\n    this._distance = distance;\n    this._didMove = true;\n    this._isScrolling = false;\n  }\n\n  scroll () {\n    this._isScrolling = true;\n    this._didMove = false;\n  }\n\n}\n\n  class PullRefresh extends Pan {\n\n    constructor () {\n\n      super(...arguments);\n\n      this._el = this._options.el;\n\n      this._options.threshold = this._options.threshold || 0;\n\n      this._state = {};\n\n      this.pubSub = new PubSub();\n\n    }\n\n    get el () {\n      return this._el;\n    }\n\n    get state () {\n      return this._state;\n    }\n\n    reset () {\n      super.reset();\n      this.resetState();\n    }\n\n    resetState () {\n      this._state = {};\n    }\n\n    isScrolledToTop () {\n      return this._el.scrollTop === 0;\n    }\n\n    move (pos, event) {\n\n      let distance = this.calcDistance(pos);\n\n      if (!this.isScrolling &&\n        this.isScrolledToTop() &&\n        distance > 0) {\n\n        super.move(distance);\n\n        this._state.refresh = this.distance > this._options.threshold;\n        this._state.pull = this.distance > 0;\n\n        this.pubSub.publish('moved', this);\n\n        return true;\n      }\n      else {\n\n        this.scroll();\n\n        return false;\n      }\n\n    }\n\n\n    end () {\n\n      if (this.didMove) {\n\n        this.pubSub.publish('end', this);\n\n        this.reset();\n\n        return true;\n      }\n    }\n\n\n  }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  'use strict';\n\n  const TOUCH_START = 'touchstart MSPointerDown pointerdown';\n  const TOUCH_MOVE = 'touchmove MSPointerMove MSPointerHover pointermove';\n  const TOUCH_END = 'touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel';\n\n  const defaults = {\n    contentOffset : null,\n    threshold : 70,\n    resistance : 2.5\n  };\n\n  /* istanbul ignore next */\n  let angular = window.angular ?\n    window.angular :\n    'undefined' !== typeof require ?\n      require('angular') :\n      undefined;\n\n  let pullrefresh = angular.module('pullrefresh', []);\n\n\n\n\n  /* @ngInject */\n  pullrefresh.directive('pullrefresh', ['$window', '$document', function($window, $document) {\n\n    return {\n\n      transclude : true,\n\n      restrict: 'EA',\n\n      scope : {\n        // make the internal loader state known to external\n        // components\n        ptrStyle : '=pullrefreshLoaderStyle',\n\n        hideLoader : '=pullrefreshHideLoader',\n\n        // make the callback is evaluated on the parent scope\n        pullrefresh : '&',\n\n        pullrefreshElement: '@'\n      },\n\n      templateUrl: 'template/pullrefresh/pullrefresh.html',\n\n      link: linkPullrefreshDirective\n\n    };\n\n\n\n\n\n    ///////////////////////////////////////////////////////////\n\n\n\n    function linkPullrefreshDirective($scope, element, attrs) {\n\n      $scope.contentStyle = {};\n      $scope.ptrStyle = {};\n\n\n\n      /**\n       * Hold all of the merged parameter and default module options\n       * @type {object}\n       */\n      let options = {\n        contentOffset : attrs.pullrefreshContentOffset || defaults.contentOffset,\n        threshold: attrs.pullrefreshThreshold || defaults.threshold,\n        resistance: attrs.pullrefreshResistance || defaults.resistance || 1\n      };\n\n      /**\n       * Easy shortener for handling adding and removing body classes.\n       */\n      let ptrEl = $document[0].body;\n      if ($scope.pullrefreshElement) {\n        let elements = document.querySelectorAll($scope.pullrefreshElement);\n        if (elements.length > 0) {\n          ptrEl = elements[0];\n        }\n      }\n\n      let ptrElClassList = ptrEl.classList;\n\n      /**\n       * Holds all information about the current pan action\n       */\n      let pan = new PullRefresh({\n        el : ptrEl,\n        threshold : options.threshold,\n        resistance : options.resistance\n      });\n\n\n\n\n      activate();\n\n      ////////////\n\n      function activate() {\n        pan.reset();\n\n        pan.isLoading = false;\n\n        pan.pubSub\n        .subscribe('moved', (pan) => {\n\n          ptrElClassList[pan.state.refresh ? 'add' : 'remove']('ptr-refresh');\n          ptrElClassList[pan.state.pull ? 'add' : 'remove']('ptr-pull');\n\n          setContentPan(pan);\n        });\n\n\n\n        pan.pubSub.subscribe('end', (pan) => {\n          setContentPan(null);\n\n          if (pan.state.refresh) {\n            doLoading(pan);\n          } else {\n            doReset(pan);\n          }\n\n        });\n\n        listen(ptrEl, TOUCH_START, touchStart);\n        listen(ptrEl, TOUCH_MOVE, touchMove);\n        listen(ptrEl, TOUCH_END, touchEnd);\n      }\n\n      function listen(el, evt, handler) {\n\n        evt = evt.split(' ');\n        let i = 0;\n\n        while (evt[i] && !(`on${evt[i].toLowerCase()}` in $window)) {\n          i += 1;\n        }\n\n        if (i < evt.length) {\n          evt = evt[i];\n        }\n\n        el.addEventListener(evt, handler, false);\n\n      }\n\n\n\n      /**\n       * Determine whether pan events should apply based on scroll position on panstart\n       *\n       * @param {object} e - Event object\n       */\n      function touchStart (e) {\n\n        pan.reset();\n\n        if (pan.isLoading) {\n          return;\n        }\n\n        let t = e.touches ? e.touches[0] : e;\n\n        pan.begin(t.clientY);\n\n      }\n\n      /**\n       * Handle element on screen movement when the pandown events is firing.\n       *\n       * @param {object} e - Event object\n       */\n      function touchMove (e) {\n\n        if (pan.isLoading) {\n          return;\n        }\n\n        let t = e.touches ? e.touches[0] : e;\n\n        if (pan.move(t.clientY)) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n      }\n\n      function touchEnd (e) {\n\n        if (pan.isLoading) {\n          return;\n        }\n\n        if (pan.end()) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n\n      }\n\n\n\n\n\n\n\n\n      /**\n       * Set the CSS transform on the content element to move it on the screen.\n       */\n      function setContentPan (pan) {\n\n        if (pan === null) {\n\n          $scope.contentStyle = {};\n          $scope.ptrStyle = {};\n\n        }\n        else {\n\n          let offset = getContentOffset(options);\n\n          // in case the default loader is being hidden, use the negative\n          // pan distance to keep the loader atop\n          let loaderOffset = getLoaderOffset(pan, offset);\n\n            // Use transforms to smoothly animate elements on desktop and mobile devices\n          $scope.contentStyle = {\n            transform: 'translate3d(0, ' + pan.distance + 'px, 0)',\n            webkitTransform: 'translate3d(0, ' + pan.distance + 'px, 0)'\n          };\n\n          $scope.ptrStyle = {\n            transform: 'translate3d(0, ' + loaderOffset + 'px, 0)',\n            webkitTransform: 'translate3d(0, ' + loaderOffset + 'px, 0)'\n          };\n\n        }\n\n        $scope.$apply();\n      }\n\n\n\n\n      function getContentOffset () {\n        return options.contentOffset !== null ?\n          options.contentOffset :\n          element[0].querySelector('.ptr').offsetHeight;\n      }\n\n      function getLoaderOffset (pan, offset) {\n        return $scope.hideLoader ?\n          (-pan.distance - offset) :\n          pan.distance - offset;\n      }\n\n      /**\n       * Position content and refresh elements to show that loading is taking place.\n       */\n      function doLoading (pan) {\n        pan.isLoading = true;\n        ptrElClassList.add('ptr-loading');\n\n        // If no valid loading function exists, just reset elements\n        if (!$scope.pullrefresh) {\n          return doReset(pan);\n        }\n\n        // The loading function should return a promise\n        let loadingPromise = $scope.$eval($scope.pullrefresh);\n\n        // For UX continuity, make sure we show loading for at least one second before resetting\n        setTimeout(function() {\n\n          if (loadingPromise.then) {\n            // Once actual loading is complete, reset pull to refresh\n            loadingPromise.then(() => doReset(pan));\n          }\n\n        }, 1000);\n      }\n\n      /**\n       * Reset all elements to their starting positions before any paning took place.\n       */\n      function doReset (pan) {\n        ptrElClassList.remove('ptr-loading');\n        ptrElClassList.remove('ptr-refresh');\n        ptrElClassList.add('ptr-reset');\n\n        let elClassRemove = function() {\n          ptrElClassList.remove('ptr-reset');\n          ptrElClassList.remove('ptr-pull');\n\n          pan.el.removeEventListener('transitionend', elClassRemove, false);\n        };\n\n        pan.el.addEventListener('transitionend', elClassRemove, false);\n\n\n        pan.isLoading = false;\n      }\n\n    }\n  }]);\n\n})();\n","(function() {\n\n  'use strict';\n\n  /* istanbul ignore next */\n  var angular = window.angular ? window.angular : 'undefined' !== typeof require ? require('angular') : undefined;\n\n\n  angular.module('pullrefresh')\n    .run(['$templateCache', function($templateCache) {\n      $templateCache.put('template/pullrefresh/pullrefresh.html',\n        '<div ng-if=\"!hideLoader\" ng-style=\"ptrStyle\" class=\"ptr\">' +\n            '<span class=\"genericon genericon-next\"></span>' +\n\n            '<div class=\"loading\">' +\n                '<span class=\"l1\"></span>' +\n                '<span class=\"l2\"></span>' +\n                '<span class=\"l3\"></span>' +\n            '</div>' +\n        '</div>' +\n\n        '<div ng-style=\"contentStyle\" class=\"ptr-content\">' +\n          //'Pull down to refresh!' +\n          '<div ng-transclude></div>' +\n        '</div>');\n    }]);\n\n})();\n"]}