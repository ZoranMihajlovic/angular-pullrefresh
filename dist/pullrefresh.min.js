"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(){var e="touchstart MSPointerDown pointerdown",t="touchmove MSPointerMove MSPointerHover pointermove",n="touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",r={contentOffset:null,threshold:70,resistance:2.5};(window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0).module("pullrefresh",[]).directive("pullrefresh",["$window","$document",function(i,s){function o(e,t){return t.pullrefreshTemplate||"template/pullrefresh/pullrefresh.html"}function l(o,l,a){function u(e,t,n){t=t.split(" ");for(var r=0;t[r]&&!("on"+t[r].toLowerCase()in i);)r+=1;r<t.length&&(t=t[r]),e.addEventListener(t,n,!1)}function c(e){if(w.reset(),!w.isLoading){var t=e.touches?e.touches[0]:e;w.begin(t.clientY)}}function h(e){if(!w.isLoading){var t=e.touches?e.touches[0]:e;w.move(t.clientY)&&e.stopPropagation()}}function f(e){w.isLoading||w.end()&&e.cancelable&&(e.preventDefault(),e.stopPropagation())}function p(e){if(null===e)o.contentStyle={},o.ptrStyle={};else{var t=d(),n=v(e,t);o.contentStyle={transform:"translate3d(0, "+e.distance+"px, 0)",webkitTransform:"translate3d(0, "+e.distance+"px, 0)"},o.ptrStyle={transform:"translate3d(0, "+n+"px, 0)",webkitTransform:"translate3d(0, "+n+"px, 0)"}}o.$apply()}function d(){return null!==g.contentOffset?g.contentOffset:l[0].querySelector(".ptr").offsetHeight}function v(e,t){return o.hideLoader?-e.distance-t:e.distance-t}function y(e){if(e.isLoading=!0,S.add("ptr-loading"),!o.pullrefresh)return _(e);var t=o.$eval(o.pullrefresh);setTimeout(function(){t.then&&t.then(function(){return _(e)})},1e3)}function _(e){S.remove("ptr-loading"),S.remove("ptr-refresh"),S.add("ptr-reset");var t=function t(){S.remove("ptr-reset"),S.remove("ptr-pull"),e.el.removeEventListener("transitionend",t,!1)};e.el.addEventListener("transitionend",t,!1),e.isLoading=!1}if("true"!==a.pullrefreshDisabled){o.contentStyle={},o.ptrStyle={};var g={contentOffset:a.pullrefreshContentOffset||r.contentOffset,threshold:a.pullrefreshThreshold||r.threshold,resistance:a.pullrefreshResistance||r.resistance||1},b=s[0].body;if(o.pullrefreshElement){var m=document.querySelectorAll(o.pullrefreshElement);m.length>0&&(b=m[0])}var S=b.classList,w=new i.PullRefresh({el:b,threshold:g.threshold,resistance:g.resistance});!function(){w.reset(),w.isLoading=!1,w.pubSub.subscribe("moved",function(e){S[e.state.refresh?"add":"remove"]("ptr-refresh"),S[e.state.pull?"add":"remove"]("ptr-pull"),p(e)}),w.pubSub.subscribe("end",function(e){p(null),e.state.refresh?y(e):_(e)}),u(b,e,c),u(b,t,h),u(b,n,f)}()}}return{transclude:!0,restrict:"EA",scope:{ptrStyle:"=pullrefreshLoaderStyle",hideLoader:"=pullrefreshHideLoader",pullrefresh:"&",pullrefreshElement:"@",pullrefreshTemplate:"@",pullrefreshDisabled:"@"},templateUrl:o,link:l}}])}();var _get=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,r)}if("value"in i)return i.value;var o=i.get;if(void 0!==o)return o.call(r)},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){var t=function(){function e(){_classCallCheck(this,e),this.handlers=[]}return _createClass(e,[{key:"subscribe",value:function(e,t,n){return void 0===n&&(n=t),this.handlers.push({event:e,handler:t.bind(n)}),this}},{key:"publish",value:function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(;t<this.handlers.length;t+=1)if(this.handlers[t].event===e){var s;(s=this.handlers[t]).handler.apply(s,r)}}}]),e}(),n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{resistance:1};_classCallCheck(this,e),this._options=t,this.reset()}return _createClass(e,[{key:"reset",value:function(){this._distance=0,this._start=0,this._isScrolling=!1,this._didMove=!1,this._movedBefore=!1}},{key:"begin",value:function(e){this._start=e}},{key:"calcDistance",value:function(e){return Math.round((e-this._start)/this._options.resistance)}},{key:"move",value:function(e){this._distance=e,this._didMove=!0,this._movedBefore=!0,this._isScrolling=!1}},{key:"scroll",value:function(){this._isScrolling=!0,this._didMove=!1}},{key:"distance",get:function(){return this._distance}},{key:"isScrolling",get:function(){return this._isScrolling}},{key:"didMove",get:function(){return this._didMove}},{key:"movedBefore",get:function(){return this._movedBefore}}]),e}(),r=function(e){function n(){_classCallCheck(this,n);var e=_possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return e._el=e._options.el,e._options.threshold=e._options.threshold||0,e._state={},e.pubSub=new t,e}return _inherits(n,e),_createClass(n,[{key:"reset",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"reset",this).call(this),this.resetState()}},{key:"resetState",value:function(){this._state={}}},{key:"isScrolledToTop",value:function(){return 0===this._el.scrollTop}},{key:"move",value:function(e,t){var r=this.calcDistance(e);return!this.isScrolling&&this.isScrolledToTop()&&r>0||!this.isScrolling&&!this.isScrolledToTop()&&r>0&&this.movedBefore?(_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"move",this).call(this,r),this._state.refresh=this.distance>this._options.threshold,this._state.pull=this.distance>0,this.pubSub.publish("moved",this),!0):(this.scroll(),!1)}},{key:"end",value:function(){if(this.didMove)return this.pubSub.publish("end",this),this.reset(),!0}},{key:"el",get:function(){return this._el}},{key:"state",get:function(){return this._state}}]),n}(n);e.PullRefresh=r}(window),function(){(window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0).module("pullrefresh").run(["$templateCache",function(e){e.put("template/pullrefresh/pullrefresh.html",'<div ng-if="!hideLoader" ng-style="ptrStyle" class="ptr"><span class="genericon genericon-next"></span><div class="loading"><span class="l1"></span><span class="l2"></span><span class="l3"></span></div></div><div ng-style="contentStyle" class="ptr-content"><div ng-transclude></div></div>')}])}();