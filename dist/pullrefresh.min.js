"use strict";function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _get=function(e,t,n){for(var r=!0;r;){var s=e,i=t,o=n;l=u=a=void 0,r=!1,null===s&&(s=Function.prototype);var l=Object.getOwnPropertyDescriptor(s,i);if(void 0!==l){if("value"in l)return l.value;var a=l.get;return void 0===a?void 0:a.call(o)}var u=Object.getPrototypeOf(s);if(null===u)return void 0;e=u,t=i,n=o,r=!0}},_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){var e=function(){function e(){_classCallCheck(this,e),this.handlers=[]}return _createClass(e,[{key:"subscribe",value:function(e,t,n){return"undefined"==typeof n&&(n=t),this.handlers.push({event:e,handler:t.bind(n)}),this}},{key:"publish",value:function(e){for(var t=0,n=arguments.length,r=Array(n>1?n-1:0),s=1;n>s;s++)r[s-1]=arguments[s];for(;t<this.handlers.length;t+=1)if(this.handlers[t].event===e){var i;(i=this.handlers[t]).handler.apply(i,r)}}}]),e}(),t=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{resistance:1}:arguments[0];_classCallCheck(this,e),this._options=t,this.reset()}return _createClass(e,[{key:"reset",value:function(){this._distance=0,this._start=0,this._isScrolling=!1,this._didMove=!1}},{key:"begin",value:function(e){this._start=e}},{key:"calcDistance",value:function(e){return Math.round((e-this._start)/this._options.resistance)}},{key:"move",value:function(e){this._distance=e,this._didMove=!0,this._isScrolling=!1}},{key:"scroll",value:function(){this._isScrolling=!0,this._didMove=!1}},{key:"distance",get:function(){return this._distance}},{key:"isScrolling",get:function(){return this._isScrolling}},{key:"didMove",get:function(){return this._didMove}}]),e}(),n=function(t){function n(){_classCallCheck(this,n),_get(Object.getPrototypeOf(n.prototype),"constructor",this).apply(this,arguments),this._el=this._options.el,this._options.threshold=this._options.threshold||0,this._state={},this.pubSub=new e}return _inherits(n,t),_createClass(n,[{key:"reset",value:function(){_get(Object.getPrototypeOf(n.prototype),"reset",this).call(this),this.resetState()}},{key:"resetState",value:function(){this._state={}}},{key:"isScrolledToTop",value:function(){return 0===this._el.scrollTop}},{key:"move",value:function(e,t){var r=this.calcDistance(e);return!this.isScrolling&&this.isScrolledToTop()&&r>0?(_get(Object.getPrototypeOf(n.prototype),"move",this).call(this,r),this._state.refresh=this.distance>this._options.threshold,this._state.pull=this.distance>0,this.pubSub.publish("moved",this),!0):(this.scroll(),!1)}},{key:"end",value:function(){return this.didMove?(this.pubSub.publish("end",this),this.reset(),!0):void 0}},{key:"el",get:function(){return this._el}},{key:"state",get:function(){return this._state}}]),n}(t),r="touchstart MSPointerDown pointerdown",s="touchmove MSPointerMove MSPointerHover pointermove",i="touchend touchcancel MSPointerUp MSPointerCancel pointerup pointercancel",o={contentOffset:null,threshold:70,resistance:2.5},l=window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0,a=l.module("pullrefresh",[]);a.directive("pullrefresh",["$window","$document",function(e,t){function l(l,a,u){function c(){w.reset(),w.isLoading=!1,w.pubSub.subscribe("moved",function(e){k[e.state.refresh?"add":"remove"]("ptr-refresh"),k[e.state.pull?"add":"remove"]("ptr-pull"),v(e)}),w.pubSub.subscribe("end",function(e){v(null),e.state.refresh?_(e):b(e)}),h(S,r,f),h(S,s,p),h(S,i,d)}function h(t,n,r){n=n.split(" ");for(var s=0;n[s]&&!("on"+n[s].toLowerCase()in e);)s+=1;s<n.length&&(n=n[s]),t.addEventListener(n,r,!1)}function f(e){if(w.reset(),!w.isLoading){var t=e.touches?e.touches[0]:e;w.begin(t.clientY)}}function p(e){if(!w.isLoading){var t=e.touches?e.touches[0]:e;w.move(t.clientY)&&(event.preventDefault(),event.stopPropagation())}}function d(e){w.isLoading||w.end()&&(event.preventDefault(),event.stopPropagation())}function v(e){if(null===e)l.contentStyle={},l.ptrStyle={};else{var t=g(m),n=y(e,t);l.contentStyle={transform:"translate3d(0, "+e.distance+"px, 0)",webkitTransform:"translate3d(0, "+e.distance+"px, 0)"},l.ptrStyle={transform:"translate3d(0, "+n+"px, 0)",webkitTransform:"translate3d(0, "+n+"px, 0)"}}l.$apply()}function g(){return null!==m.contentOffset?m.contentOffset:a[0].querySelector(".ptr").offsetHeight}function y(e,t){return l.hideLoader?-e.distance-t:e.distance-t}function _(e){if(e.isLoading=!0,e.el.classList.add("ptr-loading"),!l.pullrefresh)return b(e);var t=l.$eval(l.pullrefresh);setTimeout(function(){t.then&&t.then(function(){return b(e)})},1e3)}function b(e){var t=e.el,n=t.classList;n.remove("ptr-loading"),n.remove("ptr-refresh"),n.add("ptr-reset");var r=function s(){n.remove("ptr-reset"),n.remove("ptr-pull"),t.removeEventListener("transitionend",s,!1)};t.addEventListener("transitionend",r,!1),e.isLoading=!1}l.contentStyle={},l.ptrStyle={};var m={contentOffset:u.pullrefreshContentOffset||o.contentOffset,threshold:u.pullrefreshThreshold||o.threshold,resistance:u.pullrefreshResistance||o.resistance||1},S=a[0]||t[0].body,k=S.classList,w=new n({el:S,threshold:m.threshold,resistance:m.resistance});c()}return{transclude:!0,restrict:"EA",scope:{ptrStyle:"=pullrefreshLoaderStyle",hideLoader:"=pullrefreshHideLoader",pullrefresh:"&"},templateUrl:"template/pullrefresh/pullrefresh.html",link:l}}])}(),function(){var e=window.angular?window.angular:"undefined"!=typeof require?require("angular"):void 0;e.module("pullrefresh").run(["$templateCache",function(e){e.put("template/pullrefresh/pullrefresh.html",'<div ng-if="!hideLoader" ng-style="ptrStyle" class="ptr"><span class="genericon genericon-next"></span><div class="loading"><span class="l1"></span><span class="l2"></span><span class="l3"></span></div></div><div ng-style="contentStyle" class="ptr-content"><div ng-transclude></div></div>')}])}();